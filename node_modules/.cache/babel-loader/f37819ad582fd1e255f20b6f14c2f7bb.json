{"ast":null,"code":"import firebase from 'firebase/compat/app';\nimport 'firebase/compat/database';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD5cN1cY35dyB4oeIzQCW_ZqkjwRkjtPPw\",\n  authDomain: \"rick-shop-f42cb.firebaseapp.com\",\n  databaseURL: \"https://rick-shop-f42cb-default-rtdb.firebaseio.com\",\n  projectId: \"rick-shop-f42cb\",\n  storageBucket: \"rick-shop-f42cb.appspot.com\",\n  messagingSenderId: \"693325465087\",\n  appId: \"1:693325465087:web:484cf8221251337f7a53ca\"\n};\nfirebase.initializeApp(firebaseConfig);\nexport const fire = firebase;\nexport const database = fire.database();\n\nclass GetPages {\n  constructor() {\n    this.fire = firebase;\n    this.database = this.fire.database();\n  }\n\n  async addToBasket(clicks) {\n    this.database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/' + clicks[0][1].name).set(clicks);\n  }\n\n  async getPage() {\n    const response = await fetch('https://rickandmortyapi.com/api/character');\n    const data = await response.json();\n    const arrInfo = await Object.values(data.info);\n    const pages = await arrInfo[1];\n    return pages;\n  }\n\n  async getCharacters() {\n    let pages = null;\n    let aliveArr = [];\n    let finalArr = [];\n\n    try {\n      pages = await this.getPage();\n    } catch (e) {\n      console.log('error');\n      console.log(e);\n    }\n\n    for (let i = 1; i <= pages; i++) {\n      const response = await fetch('https://rickandmortyapi.com/api/character' + '?page=' + i);\n      const data = await response.json();\n      const array = await data.results;\n\n      for (let j = 0; j <= array.length - 1; j++) {\n        if (array[j].status === 'Alive') {\n          aliveArr.push(array[j]);\n        }\n      }\n    }\n\n    finalArr = aliveArr.flat(1);\n    console.log(finalArr.length);\n\n    for (let i = 0; i <= finalArr.length; i++) {\n      this.database.ref('/characters/' + finalArr[i].id).set(finalArr[i]); // console.log(finalArr[i].id);\n    }\n  }\n\n}\n\nconst FirebaseClass = new GetPages();\nexport default FirebaseClass;","map":{"version":3,"sources":["C:/Users/user/rick-shop/rick-shop/src/firebase/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","fire","database","GetPages","constructor","addToBasket","clicks","ref","localStorage","getItem","name","set","getPage","response","fetch","data","json","arrInfo","Object","values","info","pages","getCharacters","aliveArr","finalArr","e","console","log","i","array","results","j","length","status","push","flat","id","FirebaseClass"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/database';\n\nconst firebaseConfig = {\n\n    apiKey: \"AIzaSyD5cN1cY35dyB4oeIzQCW_ZqkjwRkjtPPw\",\n\n    authDomain: \"rick-shop-f42cb.firebaseapp.com\",\n\n    databaseURL: \"https://rick-shop-f42cb-default-rtdb.firebaseio.com\",\n\n    projectId: \"rick-shop-f42cb\",\n\n    storageBucket: \"rick-shop-f42cb.appspot.com\",\n\n    messagingSenderId: \"693325465087\",\n\n    appId: \"1:693325465087:web:484cf8221251337f7a53ca\"\n\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const fire = firebase;\nexport const database = fire.database();\n\nclass GetPages {\n\n    constructor() {\n        this.fire = firebase;\n        this.database = this.fire.database();\n    }\n\n    async addToBasket(clicks) {\n        this.database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/' + clicks[0][1].name).set(clicks);\n    }\n\n    async getPage() {\n        const response = await fetch('https://rickandmortyapi.com/api/character');\n        const data = await response.json();\n        const arrInfo = await Object.values(data.info);\n        const pages = await arrInfo[1];\n\n        return pages;\n    }\n\n    async getCharacters() {\n        let pages = null;\n        let aliveArr = [];\n        let finalArr = [];\n\n\n        try {\n            pages = await this.getPage();\n        } catch (e) {\n            console.log('error');\n            console.log(e);\n        }\n\n        for (let i = 1; i <= pages; i++) {\n            const response = await fetch('https://rickandmortyapi.com/api/character' + '?page=' + i);\n            const data = await response.json();\n            const array = await data.results;\n            for (let j = 0; j <= array.length - 1; j++) {\n                if (array[j].status === 'Alive') {\n                    aliveArr.push(array[j]);\n\n                }\n            }\n\n        }\n\n        finalArr = aliveArr.flat(1);\n        console.log(finalArr.length);\n\n        for (let i = 0; i <= finalArr.length; i++) {\n            this.database.ref('/characters/' + finalArr[i].id).set(finalArr[i]);\n            // console.log(finalArr[i].id);\n        }\n\n    }\n\n\n\n}\n\nconst FirebaseClass = new GetPages();\n\nexport default FirebaseClass;\n\n"]},"metadata":{},"sourceType":"module"}