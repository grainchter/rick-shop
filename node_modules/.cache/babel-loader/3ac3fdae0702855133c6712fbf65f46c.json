{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\rick-shop\\\\rick-shop\\\\src\\\\components\\\\main\\\\bascet\\\\bascet.js\",\n    _s = $RefreshSig$();\n\nimport s from './bascet.module.css';\nimport { useEffect, useState } from 'react';\nimport { database } from '../../../firebase/firebase';\nimport { useSelector } from \"react-redux\";\nimport { getUserToken } from '../../../store/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Bascet = () => {\n  _s();\n\n  const userId = useSelector(getUserToken); // (async () => {\n  //     await userId;\n  //     console.log(userId);\n  // })()\n\n  const [data, setData] = useState({});\n  const [array, setArr] = useState([]);\n  console.log(userId);\n  useEffect(() => {\n    (async () => {\n      await userId;\n      console.log(userId);\n    })(); // (async () => {\n    //     await userId;\n    //     console.log(userId);\n\n\n    if (Object.keys(userId).length != 0) {\n      database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/').once('value', snapshot => {\n        const db = snapshot.val();\n\n        if (db != null) {\n          setData(Object.entries(db));\n        }\n      });\n    } else {\n      if (JSON.parse(localStorage.getItem(\"data2\")) != null) {\n        // console.log(JSON.parse(localStorage.getItem(\"data2\")));\n        setData(JSON.parse(localStorage.getItem(\"data2\")));\n      }\n    } // })()\n\n  }, []);\n\n  const check = id => {\n    let checked = false;\n\n    if (document.getElementById(id).checked === true) {\n      document.getElementById(id).checked = checked;\n      setArr(array.filter(item => item !== id));\n    } else if (document.getElementById(id).checked === false) {\n      document.getElementById(id).checked = !checked;\n      setArr([id].concat(array));\n    }\n  };\n\n  console.log(array);\n\n  const del = () => {\n    if (Object.keys(userId).length == 0) {\n      for (let i = 0; i <= array.length - 1; i++) {\n        let items = JSON.parse(localStorage.getItem(\"data2\"));\n        items = items.filter(item => item[1].id !== array[i]);\n        localStorage.setItem(\"data2\", JSON.stringify(items));\n      }\n    } else {\n      for (let i = 0; i <= array.length - 1; i++) {\n        database.ref('/users/' + userId + '/basket/' + array[i]).remove();\n      }\n    }\n\n    window.location.reload();\n  };\n\n  console.log(array);\n  console.log(data);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: s.container,\n    children: [Object.values(data).map(([key, {\n      name,\n      id,\n      image,\n      species,\n      status\n    }]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.wrapper,\n      onClick: () => {\n        check(id);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.checkbox,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.text,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: species\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.img,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.buy,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Buy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          del();\n        },\n        children: \"Clear\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Bascet, \"7ieuE9HhjtN1iBDwykNdyQeXwpI=\", false, function () {\n  return [useSelector];\n});\n\n_c = Bascet;\nexport default Bascet;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bascet\");","map":{"version":3,"sources":["C:/Users/user/rick-shop/rick-shop/src/components/main/bascet/bascet.js"],"names":["s","useEffect","useState","database","useSelector","getUserToken","Bascet","userId","data","setData","array","setArr","console","log","Object","keys","length","ref","localStorage","getItem","once","snapshot","db","val","entries","JSON","parse","check","id","checked","document","getElementById","filter","item","concat","del","i","items","setItem","stringify","remove","window","location","reload","container","values","map","key","name","image","species","status","wrapper","checkbox","text","img","buy"],"mappings":"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","sourcesContent":["\r\nimport s from './bascet.module.css';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport { database } from '../../../firebase/firebase';\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { getUserToken } from '../../../store/user';\r\n\r\n\r\nconst Bascet = () => {\r\n\r\n\r\n    const userId = useSelector(getUserToken);\r\n    // (async () => {\r\n    //     await userId;\r\n    //     console.log(userId);\r\n    // })()\r\n\r\n    const [data, setData] = useState({});\r\n\r\n    const [array, setArr] = useState([]);\r\n\r\n    console.log(userId);\r\n\r\n    useEffect(() => {\r\n\r\n        (async () => {\r\n            await userId;\r\n            console.log(userId);\r\n        })()\r\n\r\n        // (async () => {\r\n        //     await userId;\r\n        //     console.log(userId);\r\n        if (Object.keys(userId).length != 0) {\r\n            database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/').once('value', (snapshot) => {\r\n                const db = snapshot.val();\r\n                if (db != null) {\r\n                    setData(Object.entries(db));\r\n                }\r\n            });\r\n\r\n\r\n        } else {\r\n            if (JSON.parse(localStorage.getItem(\"data2\")) != null) {\r\n\r\n                // console.log(JSON.parse(localStorage.getItem(\"data2\")));\r\n                setData(JSON.parse(localStorage.getItem(\"data2\")));\r\n            }\r\n        }\r\n        // })()\r\n\r\n\r\n    }, []);\r\n\r\n\r\n    const check = (id) => {\r\n        let checked = false;\r\n        if (document.getElementById(id).checked === true) {\r\n            document.getElementById(id).checked = checked;\r\n            setArr(array.filter(item => item !== id));\r\n\r\n        } else if (document.getElementById(id).checked === false) {\r\n            document.getElementById(id).checked = !checked;\r\n            setArr([id].concat(array));\r\n        }\r\n\r\n    }\r\n\r\n    console.log(array);\r\n\r\n    const del = () => {\r\n\r\n        if (Object.keys(userId).length == 0) {\r\n            for (let i = 0; i <= array.length - 1; i++) {\r\n                let items = JSON.parse(localStorage.getItem(\"data2\"));\r\n                items = items.filter((item) => item[1].id !== array[i]);\r\n                localStorage.setItem(\"data2\", JSON.stringify(items));\r\n            }\r\n\r\n\r\n\r\n        } else {\r\n\r\n            for (let i = 0; i <= array.length - 1; i++) {\r\n                database.ref('/users/' + userId + '/basket/' + array[i]).remove();\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        window.location.reload();\r\n\r\n    }\r\n\r\n    console.log(array);\r\n    console.log(data);\r\n\r\n    return (\r\n\r\n        <div className={s.container}>\r\n\r\n            {\r\n                Object.values(data).map(([key, { name, id, image, species, status }]) =>\r\n                    <div className={s.wrapper} onClick={() => {\r\n\r\n                        check(id);\r\n\r\n                    }\r\n                    }>\r\n\r\n                        <div className={s.checkbox}>\r\n                            <input type=\"checkbox\" id={id} />\r\n                        </div>\r\n\r\n                        <div className={s.text}>\r\n                            <p>{name}</p>\r\n                            <p>{status}</p>\r\n                            <p>{species}</p>\r\n                            <h1>{id}</h1>\r\n                        </div>\r\n                        <div className={s.img}>\r\n                            <img src={image}></img>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n\r\n            <div className={s.buy}>\r\n                <h1>Купить сейчас</h1>\r\n                <button>Buy</button>\r\n                <button onClick={() => {\r\n\r\n                    del();\r\n\r\n                }}>Clear</button>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Bascet;"]},"metadata":{},"sourceType":"module"}