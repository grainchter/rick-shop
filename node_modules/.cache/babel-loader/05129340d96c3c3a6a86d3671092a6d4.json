{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\rick-shop\\\\rick-shop\\\\src\\\\components\\\\main\\\\catalog.js\";\nimport s from './catalog.module.css';\nimport { database } from '../../firebase/firebase';\nimport React, { useState, useEffect } from \"react\";\nimport Card from '../card/card';\nimport { useDispatch } from 'react-redux';\nimport { getCardsResolve } from '../../store/selected';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Catalog = ({\n  char\n}) => {\n  // const dispatch = useDispatch();\n  // let onPage = 16;\n  // const [char, setChar] = useState([]);\n  // const [clicked, setClicked] = useState(JSON.parse(localStorage.getItem(\"data2\")));\n  // const [page, setPage] = useState(1);\n  // const [arr, setArr] = useState([]);\n  // const [isLoading, setLoading] = useState(false);\n  // dispatch(getCardsResolve(clicked));\n  // useEffect(() => {\n  //   getData(1);\n  // }, []);\n  // const getData = (num) => {\n  //   database.ref('characters').orderByChild(\"id\").startAt(num).limitToFirst(onPage).once('value', (snapshot) => {\n  //     snapshot.forEach((childSnapshot) => {\n  //       let childKey = childSnapshot.key;\n  //       setArr(arr => [...arr, childKey]);\n  //     });\n  //     const data = snapshot.val();\n  //     setChar(data);\n  //     setLoading(true);\n  //   });\n  // }\n  // const getPrev = (num) => {\n  //   database.ref('characters').orderByChild(\"id\").endAt(num).limitToLast(onPage).once('value', (snapshot) => {\n  //     snapshot.forEach((childSnapshot) => {\n  //       let childKey = childSnapshot.key;\n  //       setArr(arr => [...arr, childKey]);\n  //     });\n  //     const data = snapshot.val();\n  //     setChar(data);\n  //   });\n  // }\n  // const nexPage = () => {\n  //   let num = parseInt(arr[arr.length - 1]);\n  //   getData(num);\n  //   setArr([]);\n  //   setPage(page + 1);\n  // }\n  // const prevPage = () => {\n  //   let num = parseInt(arr[0]);\n  //   getPrev(num);\n  //   setArr([]);\n  //   setPage(page + 1);\n  // }\n  const buy = id => {\n    var _JSON$parse;\n\n    let exist = false;\n    let obj = Object.entries(char);\n    const keyPock = obj.find(element => element[1].id === id);\n    const clicks = (_JSON$parse = JSON.parse(localStorage.getItem(\"data2\"))) !== null && _JSON$parse !== void 0 ? _JSON$parse : [];\n    clicks.forEach(element => {\n      if (keyPock[0] === element[0]) {\n        exist = true;\n      }\n    });\n\n    if (localStorage.getItem(\"idToken\") != null) {\n      addCharacter(keyPock);\n    } else {\n      clicks.push(keyPock);\n      addCharacter(clicks);\n    }\n  };\n\n  const addCharacter = clicks => {\n    if (localStorage.getItem(\"idToken\") != null) {\n      console.log(clicks);\n      database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/' + clicks[1].id).set(clicks[1]);\n    } else {\n      localStorage.setItem(\"data2\", JSON.stringify(clicks));\n      setClicked(JSON.parse(localStorage.getItem(\"data2\")));\n      console.log(\"записали в локалсторадж\");\n    }\n  }; // console.log(isLoading);\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.wrap,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.app,\n        children: Object.entries(char).map(([key, {\n          name,\n          id,\n          image,\n          species,\n          status,\n          price\n        }]) => /*#__PURE__*/_jsxDEV(Card, {\n          name: name,\n          image: image,\n          id: id,\n          species: species,\n          status: status,\n          price: price,\n          onCardClick: () => {\n            buy(id);\n          }\n        }, id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_c = Catalog;\nexport default Catalog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Catalog\");","map":{"version":3,"sources":["C:/Users/user/rick-shop/rick-shop/src/components/main/catalog.js"],"names":["s","database","React","useState","useEffect","Card","useDispatch","getCardsResolve","Catalog","char","buy","id","exist","obj","Object","entries","keyPock","find","element","clicks","JSON","parse","localStorage","getItem","forEach","addCharacter","push","console","log","ref","set","setItem","stringify","setClicked","wrap","app","map","key","name","image","species","status","price"],"mappings":"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","sourcesContent":["import s from './catalog.module.css';\nimport { database } from '../../firebase/firebase';\nimport React, { useState, useEffect } from \"react\";\nimport Card from '../card/card';\n\nimport { useDispatch } from 'react-redux';\nimport { getCardsResolve } from '../../store/selected';\n\nconst Catalog = ({char}) => {\n\n  // const dispatch = useDispatch();\n\n  // let onPage = 16;\n\n  // const [char, setChar] = useState([]);\n  // const [clicked, setClicked] = useState(JSON.parse(localStorage.getItem(\"data2\")));\n  // const [page, setPage] = useState(1);\n  // const [arr, setArr] = useState([]);\n\n  // const [isLoading, setLoading] = useState(false);\n\n  // dispatch(getCardsResolve(clicked));\n\n  // useEffect(() => {\n  //   getData(1);\n  // }, []);\n\n  // const getData = (num) => {\n  //   database.ref('characters').orderByChild(\"id\").startAt(num).limitToFirst(onPage).once('value', (snapshot) => {\n  //     snapshot.forEach((childSnapshot) => {\n  //       let childKey = childSnapshot.key;\n  //       setArr(arr => [...arr, childKey]);\n  //     });\n  //     const data = snapshot.val();\n  //     setChar(data);\n  //     setLoading(true);\n  //   });\n  // }\n\n  // const getPrev = (num) => {\n  //   database.ref('characters').orderByChild(\"id\").endAt(num).limitToLast(onPage).once('value', (snapshot) => {\n  //     snapshot.forEach((childSnapshot) => {\n  //       let childKey = childSnapshot.key;\n  //       setArr(arr => [...arr, childKey]);\n  //     });\n  //     const data = snapshot.val();\n\n  //     setChar(data);\n\n  //   });\n  // }\n\n  // const nexPage = () => {\n  //   let num = parseInt(arr[arr.length - 1]);\n  //   getData(num);\n  //   setArr([]);\n  //   setPage(page + 1);\n  // }\n\n  // const prevPage = () => {\n  //   let num = parseInt(arr[0]);\n  //   getPrev(num);\n  //   setArr([]);\n  //   setPage(page + 1);\n  // }\n\n  const buy = (id) => {\n\n    let exist = false;\n\n    let obj = Object.entries(char);\n    const keyPock = obj.find(element =>\n      element[1].id === id);\n\n    const clicks = JSON.parse(localStorage.getItem(\"data2\")) ?? []\n\n    clicks.forEach(element => {\n      if (keyPock[0] === element[0]) {\n        exist = true;\n      }\n    })\n\n    if (localStorage.getItem(\"idToken\") != null) {\n      addCharacter(keyPock);\n    } else {\n      clicks.push(keyPock);\n      addCharacter(clicks);\n    }\n  };\n\n  const addCharacter = (clicks) => {\n\n    if (localStorage.getItem(\"idToken\") != null) {\n      console.log(clicks);\n\n      database.ref('/users/' + localStorage.getItem(\"idToken\") + '/basket/' + clicks[1].id).set(clicks[1]);\n\n    } else {\n      localStorage.setItem(\"data2\", JSON.stringify(clicks));\n      setClicked(JSON.parse(localStorage.getItem(\"data2\")));\n      console.log(\"записали в локалсторадж\");\n    }\n\n  }\n\n  // console.log(isLoading);\n\n  return (\n    <>\n      <div className={s.wrap}>\n        <div className={s.app}>\n          {\n            Object.entries(char).map(([key, { name, id, image, species, status, price }]) =>\n              <Card\n                key={id}\n                name={name}\n                image={image}\n                id={id}\n                species={species}\n                status={status}\n                price={price}\n\n                onCardClick={() => {\n\n                  buy(id);\n\n                }\n                }\n              />\n            )\n          }\n        </div>\n        {/* <div className={s.buttons}>\n          <button onClick={prevPage} disabled={page == 1}>prev</button>\n          <button onClick={nexPage}>next</button>\n        </div> */}\n\n      </div>\n    </>\n  );\n}\n\nexport default Catalog;"]},"metadata":{},"sourceType":"module"}